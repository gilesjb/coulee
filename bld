#!/usr/bin/java -classpath target/classes --source 17

import java.util.stream.Collectors;

public interface MyProject extends Builder {

    default File fileCopy(File file) {
        return write("copy/" + file.name(), "I say " + file.read().trim());
    }

    default Fileset fileCopies() {
        return sources("test/resources/*.txt").stream()
                .map(this::fileCopy)
                .collect(Fileset.COLLECT);
    }

    default String concatenatedMessage() {
        return fileCopies().stream()
                .map(File::read)
                .collect(Collectors.joining(", "));
    }

    default File build() {
        return write("message.txt", concatenatedMessage());
    }

    static void main(String[] args) {
        Builder.make(MyProject.class, MyProject::build, args);
    }
}
